{% extends 'autism_prevalence_map/base.html' %} 

{% load staticfiles %} 

{% block title %}Spectrum | Global Autism Prevalence Map{% endblock %} 

{% block css_block %}
<!-- Custom map CSS
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<link rel="stylesheet" type="text/css" href="{% static 'autism_prevalence_map/css/list.css' %}">
{% endblock %} 


{% block body_block %}
<!-- Main Container
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<div class="container-fluid">    
    <div class="row">
        <div class="col">
            <!-- list 
            –––––––––––––––––––––––––––––––––––––––––––––––––– -->
            <div id="list" class="table-responsive">
                <table class="table table-hover">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col"></th>
                            <th scope="col">Year</th>
                            <th scope="col">Author</th>
                            <th scope="col">Country</th>
                            <th scope="col">Area</th>
                            <th scope="col">Population</th>
                            <th scope="col">Prevalence</th>
                            <th scope="col">CI</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for study in pulled_studies %}
                        <tr data-toggle="collapse" href="#accordion_menu_{{ study.pk }}" role="button" aria-expanded="false" aria-controls="{{ study.pk }}" class="study_row">
                            <th scope="row"><i class="fas fa-chevron-down"></i></th>
                            <td>{{ study.year }}</td>
                            <td>{{ study.authors }}</td>
                            <td>{{ study.country }}</td>
                            <td>{{ study.area }}</td>
                            <td>{{ study.population }}</td>
                            <td>{{ study.prevalence_rate }}</td>
                            <td>{{ study.confidence_interval }}</td>
                            <td><button type="button" class="btn btn-warning">Share</button></td>
                        </tr>
                        <tr class="collapse" id="accordion_menu_{{ study.pk }}">
                            <td colspan="9">
                                <div class="card card-body">
                                    <h4>More data</h4>
                                    <p>
                                        <b>Age:</b> {{ study.age }} <br />
                                        <b>Number Affected:</b> {{ study.number_affected }} <br />
                                        <b>Diagnostic Criteria:</b> {{ study.diagnostic_criteria }} <br />
                                        <b>% With Normal IQ:</b> {{ study.pct_with_normal_iq }} <br />
                                        <b>Gender Ratio M:F:</b> {{ study.gender_ratio }} <br />
                                    </p>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block modal_block %} 
{% endblock %} 

{% block js_block %}
<!-- Custom JS
–––––––––––––––––––––––––––––––––––––––––––––––––– -->    
<script src="{% static 'autism_prevalence_map/js/list.js' %}"></script>
{% endblock %}
